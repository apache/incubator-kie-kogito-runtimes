{
  "id": "function",
  "name": "test-wf",
  "version": "1.0",
  "startsAt": "WaitForGreeting",
  "triggers": [{
    "name": "TestKafkaEvent",
    "source": "testtopic",
    "type": "kafka"
  }],
  "functions": [{
    "name": "greetFunction",
    "type": "script"
  }],
  "states": [{
    "name": "WaitForGreeting",
    "type": "EVENT",
    "end": true,
    "events": [{
      "eventExpression": "TestKafkaEvent",
      "actionMode": "SEQUENTIAL",
      "actions": [{
        "functionref": {
          "refname": "greetFunction",
          "parameters": {
            "script": "System.out.println(\"Hello:\" + ((com.fasterxml.jackson.databind.JsonNode)kcontext.getVariable(\"testtopicVar\")).get(\"firstName\"));"
          }
        }
      }]
    }]
  }]
}