name: Build Chain

on: [pull_request]

jobs:
  build-chain-openjdk11:
    runs-on: ubuntu-latest
    name: Pull Request openjdk11
    steps:
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Build Chain
      id: build-chain
      uses: kiegroup/github-action-build-chain@master
      with:
        child-dependencies: 'kogito-apps'
        build-command: 'mvn --version | mvn clean install -Prun-code-coverage | mvn validate -Psonarcloud-analysis -e -nsu | mvn clean install -Ppersistence'
        build-command-upstream: 'mvn clean install -DskipTests'
        workflow-file-name: "pull_request.yml"
      env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
